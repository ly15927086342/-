Author: _Yu Li_

date: _2020/04/17_

# 网络协议相关总结

## 题目

1. AJAX

XmlHttpRequest对象的封装，可以异步请求

2. GET和POST的异同

相同：都是HTTP方法，基于TCP/IP协议

不同：1.GET明文，POST密文 2.GET长度有限 3.GET ASCII码，中文要编码 4.GET有一个包，header和data一起发，200返回；POST有两个包，先header，100了再发data，200返回

3. 同源策略：更重要的安全策略，限制脚本与其他源进行交互，阻隔恶意文档，减少可能被攻击的媒介

同源定义：（协议、端口、主机）

document.domain可改为父域，如A.mm.com->mm.com，然后访问子域名属于同源

4. JSONP原理

script标签可跨域，加回调有参数返回，但有安全隐患

5. 跨域：解决获取不同源对象问题

法一：JSONP（GET）

法二：空iframe+form（POST）

法三：CORS，简单请求origin:* ; 非简单请求前端withCredentials后端Credentials\origin指定\method\Headers

法四：代理Nginx

6. HTTP常见状态码：200 301 302 404 403 500

1开头：临时相应，继续执行

2开头：成功

3开头：重定向（需进一步操作）

4开头：请求错误

5开头：服务器错误

301：永久移动

302：临时移动

403：禁止访问

404：未找到资源

500：内部错误

7. 浏览器缓存

1.强制缓存

cache-control：no-cache\no-store\max-age

设置了cache-control，Expires就会被忽略

2.协商缓存

Etag/Last-Modified区别

Etag：第一次请求，返回ETag（MD5由文件内容生成）

第二次请求，请求头带If-None-Match: MD5

若两次MD5不同，则重新返回资源，

若一致，则返回状态码304


Last-Modified：第一次请求，返回上次修改时间（精度：秒）

第二次请求，带头If-modified-since：时间

如果一致，则表明未修改，返回304

如果不一致，返回资源

`强制缓存和协商缓存的区别：`

强制缓存在浏览器端判断资源是否在效期内，如果过期，则往后端发请求

协商缓存会往后端发请求，来判断是否更新，然后返回资源或304

8. TCP和UDP区别
|TCP|UDP|
|:--|:--|
|连接|无连接|
|对系统要求多|要求少|
|复杂|结构简单|
|流模式|数据报模式|
|保证数据正确|可能丢包|
|保证数据顺序|无法保证|

9. 